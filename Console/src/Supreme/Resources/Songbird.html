<!DOCTYPE html>
<html>
    <input id="jwt_response" type="hidden" value="NO_RESPONSE" />

    <input
        id="jwt_cardinal"
        type="hidden"
        value="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIwMjc2OWE5ZS1hMGUzLTQxMjktODhjNi03ZDhjYzNhZjBlZjYiLCJpYXQiOjE1ODgwMDcwNTMsImV4cCI6MTU4ODAwNzA1MywiaXNzIjoiNWNmNzRlZGUzNTZkY2UyY2I4YzU5MzQ3IiwiT3JnVW5pdElkIjoiNTYwOTlkMjhmNzIzYWEzZTI0ZDgxYzFiIiwiT2JqZWN0aWZ5UGF5bG9hZCI6dHJ1ZSwiUGF5bG9hZCI6eyJPcmRlckRldGFpbHMiOnsiT3JkZXJOdW1iZXIiOiI5ZDM4NDNlNC01MTRlLTRjODMtOGQyOS1kZDkwYWUyODg1ZWEiLCJBbW91bnQiOjI5MTEsIkN1cnJlbmN5Q29kZSI6IkVVUiIsIk9yZGVyQ2hhbm5lbCI6IlMifX19.UFJH5J5PBGezHruLhQe0rQCgDlNUp-77GWZanUq10sM"
    />
    <div class="currency-exception" id="totals_response">
        <p>
            <label class="total">subtotal</label
            ><span class="field" id="subtotal">€24</span>
        </p>
        <p id="vat-discount-container" style="display: none;">
            <label class="total">VAT discount</label
            ><span class="field" id="vat-discount-total">-£0</span>
        </p>
        <p>
            <label class="total"
                ><span id="ship_handle_inner_label">postage</span></label
            ><span class="field" id="shipping">€5</span>
        </p>
        <p id="sales-tax-container" style="display: none;">
            <label class="total">sales tax</label
            ><span class="field" id="sales-tax-total">€4.94</span>
        </p>
        <p>
            <strong
                ><label class="total">order total</label
                ><span class="field" id="total">€29.11</span></strong
            >
        </p>
        <p class="address">
            1994 Inc Ltd T/A Supreme Heathrow Logistics Park, Unit 4, Bedfont
            Road, Heathrow, London, TW14 8EE, UK
        </p>
    </div>

    <script src="https://songbird.cardinalcommerce.com/edge/v1/songbird.js"></script>
    <script>
        const orderData = {
            OrderDetails: {
                OrderNumber: 'fa9fb3fc-b896-4b88-8e67-4df7474d3103',
                Amount: 3700,
                CurrencyCode: 'GBP',
                OrderChannel: 'S',
            },
        }

        Cardinal.start('CCA', {})

        Cardinal.setup('init', {
            jwt: document.getElementById('jwt_cardinal').value,
        })

        Cardinal.on('payments.validated', function (data, jwt) {
            console.log(data)

            switch (data.ActionCode) {
                case 'SUCCESS':
                    document.getElementById('jwt_response').value = jwt
                    break

                case 'NOACTION':
                    document.getElementById('jwt_response').value = 'NO_ACTION'
                    break

                case 'FAILURE':
                    document.getElementById('jwt_response').value = 'FAILURE'
                    break

                case 'ERROR':
                    document.getElementById('jwt_response').value = 'ERROR'
                    break
            }
        })
    </script>
</html>
